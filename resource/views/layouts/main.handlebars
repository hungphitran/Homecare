<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{#if phone}}
    <meta name="user-phone" content="{{phone}}">
    {{/if}}
    <title>
        Homecare
    </title>
    {{!-- font --}}
    {{!-- <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
     <link
        href="https://fonts.googleapis.com/css2?family=Clicker+Script&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet"/> --}}
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        <link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css">
        <script src="https://unpkg.com/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        <link rel="preload" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_blue.css">

    <!--cấu hình thông báo-->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
    <script src="/js/firebase-messaging.js"></script>

    <!-- link css -->
    <link rel="stylesheet" href="/css/style.css">
    <style>
    .toast-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      min-width: 300px;
      background: white;
      border: 1px solid #ddd;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      z-index: 9999;
    }
    .toast-header {
      padding: 10px 15px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .toast-body {
      padding: 10px 15px;
    }
    .close {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
    }
    </style>
    <!-- script -->
    <script src="/js/scripts.js"></script>
    <script src="/js/time-picker-logic.js"></script>
    <link rel="shortcut icon" href="/icon/logo-removeBg.png" type="image/x-icon">
    <script src="https://kit.fontawesome.com/01acedffd5.js" crossorigin="anonymous" defer></script>
    <!-- owl carousel -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="preload"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
   
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
    <!-- owl carousel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" defer></script>
<!-- Then Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" defer></script>
</head>

<body>
  
    <header id="header" class="header">
        {{>header}}
    </header>
  
    {{{body}}}

   
    <footer id="footer" class="footer">
        {{>footer}}
    </footer>
   <script>
        document.addEventListener('DOMContentLoaded', function() {
            const header = document.querySelector(".header__slideshow");
            if (header) {
                window.addEventListener("scroll",()=>{
                    header.classList.toggle("shadow",window.scrollY>0);
                });
            }
        });
   </script>
    <script defer>
        jQuery(document).ready(function () {
            const sliderElement = jQuery('.slider-lastest');
            if (sliderElement.length > 0) {
                sliderElement.owlCarousel({
                    loop: true,
                    margin: 10,
                    nav: false,
                    responsive: {
                        0: {
                            items: 1
                        },
                        600: {
                            items: 1
                        },
                        1000: {
                            items: 1
                        }
                    }
                });
            }
        });
    </script>
   <script>
        document.addEventListener('DOMContentLoaded', function() {
            const profileDropdownList = document.querySelector(".profile-dropdown__list");
            const btn = document.querySelector(".profile-dropdown__btn");
            
            if (profileDropdownList && btn) {
                //this function display or hide profile dropdown list
                const toggle = () => profileDropdownList.classList.toggle("active");
                
                // Make toggle function globally available if needed
                window.toggleProfileDropdown = toggle;
            }
        });
   </script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/vn.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Date picker for short term form
            flatpickr("#myID2", {
                minDate: "today",
                mode: "single",
                dateFormat: "Y-m-d",
                locale: "vn",
                disableMobile: "true",
                allowInput: true,
                clickOpens: true,
                static: true
            });

            // Date picker for long term form start date
            flatpickr("#myID7", {
                minDate: "today",
                mode: "single",
                dateFormat: "Y-m-d",
                locale: "vn",
                disableMobile: "true",
                allowInput: true,
                clickOpens: true,
                static: true
            });

            // Date picker for long term form end date
            flatpickr("#myID8", {
                minDate: "today",
                mode: "single",
                dateFormat: "Y-m-d",
                locale: "vn",
                disableMobile: "true",
                allowInput: true,
                clickOpens: true,
                static: true
            });
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.1.0/typed.umd.js"
        integrity="sha512-+2pW8xXU/rNr7VS+H62aqapfRpqFwnSQh9ap6THjsm41AxgA0MhFRtfrABS+Lx2KHJn82UOrnBKhjZOXpom2LQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
     <script>
        // Only initialize typed.js if the target element exists
        const typingElement = document.querySelector(".home__my-profession-typing");
        if (typingElement) {
            var typed = new Typed(".home__my-profession-typing",{
                strings:["","web Designer","Web Developer","Graphic Designer","Youtube"],
                typeSpeed:100,
                BackSpeed:60,
                loop:true
            });
        }
        
        // Initialize navigation when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            //aside
            const nav= document.querySelector(".aside__nav");
            if (!nav) {
                console.log("Navigation not found, skipping navigation initialization");
                return;
            }
            
            const navList = nav.querySelectorAll(".aside__item");
            const totalNavList = navList.length;
            const allSection = document.querySelectorAll(".section");
            const totalSection = allSection.length;
            
            for( let i =0; i <totalNavList;i++){
                if (navList[i]) {
                    const a = navList[i].querySelector("a");
                    if (a) {
                        a.addEventListener("click",function(){
                            console.log(this);
                            removeBackSection();
                            for(let j=0;j<totalNavList;j++){
                                if(navList[j] && navList[j].querySelector("a")){
                                    if(navList[j].querySelector("a").classList.contains("aside__nav-active")){
                                        addBackSection(j);
                                    }
                                    navList[j].querySelector("a").classList.remove("aside__nav-active");
                                }
                            }
                            this.classList.add("aside__nav-active");
                            showSection(this);
                            if(window.innerWidth<1200){
                                asideSectionToggleBtn();
                            }
                        });
                    }
                }
            }
            
            function addBackSection(num){
                if (allSection[num]) {
                    allSection[num].classList.add("back-section");
                }
            }
            
            function removeBackSection(){
                for (let i = 0; i < totalSection; i++) {
                    if (allSection[i]) {
                        allSection[i].classList.remove("back-section");
                    }
                }
            }
            
            function showSection(element){
                if (!element) return;
                
                for(let i=0;i <totalSection;i++){
                    if (allSection[i]) {
                        allSection[i].classList.remove("home-active");
                    }
                }
                const target = element.getAttribute("href")?.split("#")[1];
                if (target) {
                    console.log(target);
                    const targetSection = document.querySelector("#"+target);
                    if (targetSection) {
                        targetSection.classList.add("home-active");
                    }
                }
            }
            
            function updateNav(element){
                if (!element) return;
                
                const target = element.getAttribute("href")?.split("#")[1];
                if (target) {
                    console.log(target);
                    for(let i =0;i<totalSection;i++){
                        if (navList[i]) {
                            const navLink = navList[i].querySelector("a");
                            if (navLink) {
                                navLink.classList.remove("aside__nav-active");
                                const navTarget = navLink.getAttribute("href")?.split("#")[1];
                                if(target === navTarget){
                                    navLink.classList.add("aside__nav-active");
                                }
                            }
                        }
                    }
                }
            }
            
            // Only add event listeners if elements exist
            const hireMeBtn = document.querySelector('.hire-me');
            if (hireMeBtn) {
                hireMeBtn.addEventListener("click",function(){
                    console.log(this);
                    const sectionIndex= this.getAttribute("data-section-index");
                    console.log(sectionIndex);
                    showSection(this);
                    updateNav(this);
                    removeBackSection();
                    addBackSection(sectionIndex);
                });
            }
            
            const bookHelperBtn = document.querySelector('.book-helper');
            if (bookHelperBtn) {
                bookHelperBtn.addEventListener("click", function () {
                    console.log(this);
                    const sectionIndex = this.getAttribute("data-section-index");
                    console.log(sectionIndex);
                    showSection(this);
                    updateNav(this);
                    removeBackSection();
                    addBackSection(sectionIndex);
                });
            }
            
            const bookHelperCancelBtn = document.querySelector('.book-helper__cancel');
            if (bookHelperCancelBtn) {
                bookHelperCancelBtn.addEventListener("click", function () {
                    console.log(this);
                    const sectionIndex = this.getAttribute("data-section-index");
                    console.log(sectionIndex);
                    showSection(this);
                    updateNav(this);
                    removeBackSection();
                    addBackSection(sectionIndex);
                });
            }
            
            const navToggleBtn = document.querySelector('.aside__nav-toggle');
            const aside = document.querySelector(".aside");
            if (navToggleBtn && aside) {
                navToggleBtn.addEventListener("click",()=>
                {
                    asideSectionToggleBtn();
                });
            }
            
            function asideSectionToggleBtn(){
                if (aside && navToggleBtn) {
                    aside.classList.toggle("open");
                    navToggleBtn.classList.toggle("open");
                    for(let i=0;i< totalSection;i++){
                        if (allSection[i]) {
                            allSection[i].classList.toggle('open');
                        }
                    }
                }
            }
        });
    </script> 
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    
    <!-- Initialize Swiper -->
    <script>
        const slideshowElement = document.querySelector(".mySwiper--slideshow");
        if (slideshowElement) {
            var swiper = new Swiper(".mySwiper--slideshow", {
                slidesPerView: 1,
                slidesPerGroup: 1,
                centeredSlides: true,
                grabCursor: true,
                loop: true,
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                pagination: {
                    clickable: true,
                },
            });
        }
    </script>
   
    <script>
        const mySwiperElement = document.querySelector(".mySwiper");
        if (mySwiperElement) {
            var swiper = new Swiper(".mySwiper", {
                slidesPerView: 1,
                spaceBetween: 30,
                centeredSlides: true,
                grabCursor: true,
                loop:true,

                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
                breakpoints: {
                    576: {
                        slidesPerView: 2,
                        spaceBetween: 20,
                    },
                    768: {
                        slidesPerView: 2,
                        spaceBetween: 30,
                    },
                    992: {
                        slidesPerView: 3,
                        spaceBetween: 40,
                    }
                }
            });
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
    <script>
        window.dispatchEvent(new Event("template-loaded"));
        
        // Check for logout flag và clear localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('logout') === '1') {
                // Clear user data after logout
                if (typeof window.clearUserDataOnLogout === 'function') {
                    window.clearUserDataOnLogout();
                }
                
                // Remove logout flag from URL
                urlParams.delete('logout');
                const newUrl = window.location.pathname + (urlParams.toString() ? '?' + urlParams.toString() : '');
                window.history.replaceState({}, '', newUrl);
            }
        });
    </script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
<script src="/js/notification-toast.js"></script>
<script src="/js/token-handler.js"></script>
<script src="/js/header-updater.js"></script>
</body>

</html>
